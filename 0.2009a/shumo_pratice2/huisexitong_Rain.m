%预测2020年降雨量。
clear
syms a b;
c=[a b]';
A1=[5.319945355
4.602739726
6.486575342
6.252328767
4.315027322
4.979452055
5.710684932
5.384931507
3.708196721
4.623287671
3.827123288
3.639452055
5.329781421
6.780547945
6.829315068
6.328219178
4.599180328
6.299726027
5
4.939726027
6.925136612
7.526027397
5.16
4.405753425
3.550273224
5.872876712
5.305479452
4.332876712
7.404371585
4.41369863
4.476712329
3.478630137
4.248087432
6.03
5.21
];
A=A1';
B=cumsum(A);%原始数据累加
n=length(A);
for i=1:(n-1)
C(i)=(B(i)+B(i+1))/2;%生成累加矩阵
end
%计算待定参数的值
D=A;D(1)=[];
D=D';
E=[-C;ones(1,n-1)];
c=inv(E*E')*E*D;
c=c';
a=c(1);b=c(2);
%预测后续数据
F=[];F(1)=A(1);
for i=2:(n+10)
    F(i)=(A(1)-b/a)/exp(a*(i-1))+b/a;
end
G=[];G(1)=A(1);
for i=2:(n+10)
    G(i)=F(i)-F(i-1);%得到预测出来的数据
end
t1=1980:2014;
t2=1980:2024;
G
plot(t1,A,'*',t2,G)%原始数据与预测数据的比较

%预测2050年降雨量。
clear
syms a b;
c=[a b]';
A1=[5.319945355
4.602739726
6.486575342
6.252328767
4.315027322
4.979452055
5.710684932
5.384931507
3.708196721
4.623287671
3.827123288
3.639452055
5.329781421
6.780547945
6.829315068
6.328219178
4.599180328
6.299726027
5
4.939726027
6.925136612
7.526027397
5.16
4.405753425
3.550273224
5.872876712
5.305479452
4.332876712
7.404371585
4.41369863
4.476712329
3.478630137
4.248087432
6.03
5.21
];
A=A1';
B=cumsum(A);%原始数据累加
n=length(A);
for i=1:(n-1)
C(i)=(B(i)+B(i+1))/2;%生成累加矩阵
end
%计算待定参数的值
D=A;D(1)=[];
D=D';
E=[-C;ones(1,n-1)];
c=inv(E*E')*E*D;
c=c';
a=c(1);b=c(2);
%预测后续数据
F=[];F(1)=A(1);
for i=2:(n+40)
    F(i)=(A(1)-b/a)/exp(a*(i-1))+b/a;
end
G=[];G(1)=A(1);
for i=2:(n+40)
    G(i)=F(i)-F(i-1);%得到预测出来的数据
end
t1=1980:2014;
t2=1980:2054;
G
plot(t1,A,'*',t2,G)%原始数据与预测数据的比较